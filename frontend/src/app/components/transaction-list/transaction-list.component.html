<div class="transaction-list-container">
  
  <!-- Loading state -->
  <div *ngIf="isLoading" class="text-center p-md">
    <div class="spinner spinner-md"></div>
    <p class="mt-sm">Cargando transacciones...</p>
  </div>

  <!-- Empty state -->
  <div *ngIf="!isLoading && (!transactions || transactions.length === 0)" class="text-center p-md">
    <p class="text-muted mb-md">No hay transacciones en esta cuenta</p>
    <button class="btn btn-primary" (click)="onAddTransaction()">
      â• AÃ±adir primera transacciÃ³n
    </button>
  </div>

  <!-- Transaction list with optimized spacing -->
  <div *ngIf="!isLoading && transactions && transactions.length > 0" class="transaction-grid">
    
    <div 
      *ngFor="let transaction of transactions; let i = index"
      class="card transaction-card">
      
      <div class="card-body compact">
        <div class="transaction-header">
          
          <!-- Transaction category with icon and details -->
          <div class="transaction-category">
            <div class="transaction-icon" 
                 [class.income]="transaction.type === 'INCOME'"
                 [class.expense]="transaction.type === 'EXPENSE'">
              {{ transaction.category.icon }}
            </div>
            
            <div class="transaction-details">
              <h4>{{ transaction.title }}</h4>
              <p>{{ transaction.category.name }}</p>
            </div>
          </div>
          
          <!-- Transaction amount and date -->
          <div class="transaction-amount">
            <p class="amount" 
               [class.income]="transaction.type === 'INCOME'"
               [class.expense]="transaction.type === 'EXPENSE'">
              {{ transaction.type === 'INCOME' ? '+' : '-' }}{{ transaction.amount | number:'1.2-2' }} â‚¬
            </p>
            <p class="date">{{ transaction.date | date:'dd/M, HH:mm' }}</p>
          </div>
          
        </div>
        
        <!-- Transaction actions - compact -->
        <div class="d-flex justify-end gap-xs mt-sm">
          <button class="btn btn-xs btn-outline-primary" (click)="onEditTransaction(transaction.id)" title="Editar">
            âœï¸
          </button>
          <button class="btn btn-xs btn-danger" (click)="onDeleteTransaction(transaction.id)" title="Eliminar">
            ğŸ—‘ï¸
          </button>
        </div>
        
      </div>
    </div>

  </div>
  
  <!-- Add more transactions when list is not empty -->
  <div *ngIf="!isLoading && transactions && transactions.length > 0" class="mt-md text-center">
    <button class="btn btn-primary" (click)="onAddTransaction()">
      â• AÃ±adir TransacciÃ³n
    </button>
    
    <!-- Show more button -->
    <div *ngIf="hasMoreTransactions" class="mt-sm">
      <button class="btn btn-secondary btn-sm" (click)="onViewAllTransactions()">
        Ver todas las transacciones
      </button>
    </div>
  </div>
  
</div>